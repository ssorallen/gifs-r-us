(this["webpackJsonpgifs-r-us"]=this["webpackJsonpgifs-r-us"]||[]).push([[0],{27:function(e,t,n){e.exports=n(41)},33:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),l=(n(32),n(33),n(7)),s=n(2),i=n(9),u=n.n(i),f=n(16),h="8XWWa7n9GFMi4XySzQYnp9esBGiGBeul";function d(e){var t=e.offset;return function(){var e=Object(f.a)(u.a.mark((function e(n,a){var r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a().trending.fetch){e.next=4;break}return console.log("[trending] Fetch already pending. Ignoring fetch action."),e.abrupt("return");case 4:return r=new AbortController,n({data:{controller:r},type:"fetch-trending-start"}),console.log("[trending] Fetching with offset:".concat(t,", limit:").concat(25," ")),e.prev=7,e.next=10,fetch("https://api.giphy.com/v1/gifs/trending?api_key=".concat(h,"&limit=").concat(25,"&offset=").concat(t));case 10:return o=e.sent,e.next=13,o.json();case 13:c=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),n({data:{error:e.t0},type:"fetch-trending-error"}),e.abrupt("return");case 20:n({data:{response:c},type:"fetch-trending-success"});case 21:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t,n){return e.apply(this,arguments)}}()}function m(e){var t=e.offset,n=e.q;return function(){var e=Object(f.a)(u.a.mark((function e(a,r){var c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r().search.fetch){e.next=4;break}return console.log("[search] Fetch already pending. Ignoring search action."),e.abrupt("return");case 4:return c=new AbortController,a({data:{controller:c},type:"search-start"}),console.log("[search] Fetching with offset:".concat(t,", limit:").concat(25," ")),e.prev=7,e.next=10,fetch("https://api.giphy.com/v1/gifs/search?q=".concat(encodeURIComponent(n),"&api_key=").concat(h,"&limit=").concat(25,"&offset=").concat(t));case 10:return l=e.sent,e.next=13,l.json();case 13:o=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),a({data:{error:e.t0},type:"search-error"}),e.abrupt("return");case 20:a({data:{response:o},type:"search-success"});case 21:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t,n){return e.apply(this,arguments)}}()}var g=n(4),p=n(15);n(39);function v(e){var t=e.fluid,n=void 0===t||t,a=e.gif,c=e.size,o=void 0===c?"fixed_width":c,l=a.images[o],s=r.a.useState(!1),i=Object(p.a)(s,2),u=i[0],f=i[1];return r.a.useEffect((function(){var e=new Image;return e.onload=function(){f(!0),e.onload=null},e.src=l.url,function(){e.onload=null,e.src=""}}),[l.url]),r.a.createElement("div",{className:"gif ".concat(u?"":"gif-loading"),style:n?{}:{height:"".concat(l.height,"px"),width:"".concat(l.width,"px")}},u?r.a.createElement("img",{alt:"",className:"img-fluid",height:l.height,src:l.url,title:a.title,width:l.width}):null)}var b=n(8),E=/([^-]+)$/;function w(){var e=Object(s.h)().slug,t=Object(g.b)(),n=Object(g.c)((function(e){return e.gif.gif})),a=E.exec(e),c=null==a?"":a[0];return r.a.useEffect((function(){return t(function(e){return function(){var t=Object(f.a)(u.a.mark((function t(n){var a,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new AbortController,n({data:{controller:a},type:"fetch-gif-start"}),t.prev=3,t.next=6,fetch("https://api.giphy.com/v1/gifs/".concat(e,"?api_key=").concat(h));case 6:return c=t.sent,t.next=9,c.json();case 9:r=t.sent,t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(3),n({data:{error:t.t0},type:"fetch-gif-error"}),t.abrupt("return");case 16:n({data:{response:r},type:"fetch-gif-success"});case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}(c)),function(){t((function(e,t){var n=t().gif.fetch;null!=n&&(n.controller.abort(),e({type:"fetch-gif-cancelled"}))}))}}),[t,c]),r.a.createElement("div",{className:"py-3"},null==n?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{title:""===n.title?n.id:n.title}),""===n.title?null:r.a.createElement("h3",null,n.title),r.a.createElement("p",null,""===n.username?null:r.a.createElement(r.a.Fragment,null,"@",n.username," \xb7 "),n.import_datetime),r.a.createElement(v,{gif:n,size:"downsized"})))}function y(){var e=Object(s.f)(),t=new URLSearchParams(Object(s.g)().search).get("q"),n=r.a.useState(t),a=Object(p.a)(n,2),c=a[0],o=a[1];return r.a.useEffect((function(){o(t)}),[t]),r.a.createElement("nav",{className:"navbar"},r.a.createElement(l.b,{className:"navbar-brand",to:"/"},"Gifs-R-Us"," ",r.a.createElement("span",{"aria-label":"",role:"img"},"\ud83c\udf89")),r.a.createElement("form",{action:"/search",className:"form-inline",onSubmit:function(t){t.preventDefault(),e.push("/search?q=".concat(c))}},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{"aria-label":"Search all the GIFs",className:"form-control",name:"q",onChange:function(e){o(e.target.value)},placeholder:"Search all the GIFs",type:"search",value:null==c?"":c}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-success",type:"submit"},r.a.createElement("span",{"aria-label":"Search",role:"img"},"\ud83d\udd0e"))))))}function j(){var e=new URLSearchParams(Object(s.g)().search).get("q"),t=Object(g.b)(),n=Object(g.c)((function(e){return e.search.gifs})),a=Object(g.c)((function(e){return e.search.offsetBottom})),c=Object(g.c)((function(e){return e.search.totalCount}));return r.a.useEffect((function(){if(null!=e)return t(m({offset:0,q:e})),function(){t((function(e,t){var n=t().search.fetch;null!=n&&(n.controller.abort(),e({type:"search-cancelled"}))}))}}),[t,e]),r.a.useEffect((function(){if(null!=e)return n(),window.addEventListener("scroll",n),function(){window.removeEventListener("scroll",n)};function n(){document.documentElement.scrollHeight-(window.scrollY+document.documentElement.clientHeight)<=50&&t(m({offset:a,q:e}))}}),[t,a,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{title:"".concat(e," GIFs")}),r.a.createElement("div",{className:"py-3"},r.a.createElement("h3",null,e," ",r.a.createElement("small",{className:"text-muted"},c.toLocaleString()," GIFs")),r.a.createElement("div",{className:"grid"},n.map((function(e){var t=Math.ceil((parseInt(e.images.fixed_width.height,10)+10)/20);return r.a.createElement(l.b,{key:e.id,style:{gridRowEnd:"span ".concat(t)},to:"/gifs/".concat(e.id)},r.a.createElement(v,{fluid:!1,gif:e}))})))))}function O(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.trending.gifs})),n=Object(g.c)((function(e){return e.trending.offsetBottom}));return r.a.useEffect((function(){return e(d({offset:0})),function(){e((function(e,t){var n=t().trending.fetch;null!=n&&(n.controller.abort(),e({type:"fetch-trending-cancelled"}))}))}}),[e]),r.a.useEffect((function(){function t(){document.documentElement.scrollHeight-(window.scrollY+document.documentElement.clientHeight)<=50&&e(d({offset:n}))}return t(),window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}),[e,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{title:"Trending GIFs"}),r.a.createElement("div",{className:"py-3"},r.a.createElement("h3",null,"Trending"),r.a.createElement("div",{className:"grid"},t.map((function(e){var t=Math.ceil((parseInt(e.images.fixed_width.height,10)+10)/20);return r.a.createElement(l.b,{key:e.id,style:{gridRowEnd:"span ".concat(t)},to:"/gifs/".concat(e.slug)},r.a.createElement(v,{fluid:!1,gif:e}))})))))}var x=n(10),k=n(3),N={fetch:null,gif:null};var F={fetch:null,gifs:[],offsetBottom:0,offsetTop:0,totalCount:0};var B=n(26),I={fetch:null,gifs:[],offsetBottom:0,offsetTop:0};var G=Object(x.d)(Object(x.c)({gif:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch-gif-cancelled":case"fetch-gif-error":return Object(k.a)({},e,{fetch:null});case"fetch-gif-start":return Object(k.a)({},e,{gif:null,fetch:Object(k.a)({},t.data)});case"fetch-gif-success":return Object(k.a)({},e,{fetch:null,gif:t.data.response.data});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"search-cancelled":case"search-error":return Object(k.a)({},e,{fetch:null});case"search-start":return Object(k.a)({},e,{fetch:Object(k.a)({},t.data)});case"search-success":var n=e.gifs.slice(),a=t.data.response.pagination.offset;return t.data.response.data.forEach((function(e,t){n[a+t]=e})),Object(k.a)({},e,{fetch:null,gifs:n,offsetBottom:e.offsetBottom+t.data.response.pagination.count,totalCount:t.data.response.pagination.total_count});default:return e}},trending:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch-trending-cancelled":case"fetch-trending-error":return Object(k.a)({},e,{fetch:null});case"fetch-trending-start":return Object(k.a)({},e,{fetch:Object(k.a)({},t.data)});case"fetch-trending-success":var n=e.gifs.slice(),a=t.data.response.pagination.offset;return t.data.response.data.forEach((function(e,t){n[a+t]=e})),Object(k.a)({},e,{fetch:null,gifs:n,offsetBottom:e.offsetBottom+t.data.response.pagination.count});default:return e}}}),Object(x.a)(B.a));function S(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{defaultTitle:"Gifs-R-Us",titleTemplate:"%s \xb7 Gifs-R-Us"}),r.a.createElement(g.a,{store:G},r.a.createElement(l.a,null,r.a.createElement(y,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/gifs/:slug"},r.a.createElement(w,null)),r.a.createElement(s.a,{path:"/search"},r.a.createElement(j,null)),r.a.createElement(s.a,{path:"/"},r.a.createElement(O,null)))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.58167257.chunk.js.map